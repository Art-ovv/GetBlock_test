# GetBlock_test
> Почему при высоких показателях значения LA на сервере может не наблюдаться проблем (консоль ssh отзывается, сервисы работают в обычном режиме)?

Скорее всего, из-за того, что система не одноядерная и фактическая загруженность системы незначительная. так же может быть, что несколько дисков загружены и в целом это некритично, но влияет на load average

> Приложение запущено в докер-контейнере через docker-compose. Контейнер рестартится, логов нет, так как не успевает писать. Что будешь делать?

Скорее всего проблема в ENTRYPOINT/Dockerfile.  Попробую запустить контейнер. 

```
docker run -it #imagename# 
```

Если запустилось - буду смотреть docker-compose.yml  
Если и там всё хорошо, то проверю загруженность системы и свободное место на диске.

> Билд завершился сообщением “Репозиторий не найден“. Что будешь делать?

Добавлю в Dockerfile **"RUN apt update"**

> Есть система неважно какой структуры. Требуется настроить мониторинг с нуля. Какие уровни ты охватишь?

- **Канальный уровень.** Проверка доступности локальных машин
- **Сетевой уровень**. Проверка доступности сервисов по внешнему IP
- **Транспортный уровень.** Если есть необходимость мониторить порты
- **Прикладной уровень**. Мониторить доступность сайтов

P.s Ещё, само собой, мониторинг загрузки серверов(диски, ЦП, ОЗУ и т.д), но я не уверен, относится ли это к первому уровню OSI.

> Приложение, при запуске, выдает ошибку, что не может подключиться к внешнему сервису. Но при повторной попытке все-же подключается. В чем может быть проблема?

Если между первым и вторым подключением никем не было предпринято никаких действий, то либо внешний сервис был недоступен/перегружен, либо короткие неполадки с сетью на стороне клиента

> Клиент пишет, что заходит на свой сайт и он к нему подключается через раз. Что делать, что спрашивать от клиента?

Узнать что значит "подключается через раз". Выдаёт ли какие-то ошибки, либо не грузится страница. Попрошу почистить кеш и куки. Попрошу проверить инет через sppedtest. Если всё это не поможет, а с инетом всё норм, то F12 и буду исследовать логи

> Есть домен, который проксируется через внешний прокси-сервер. Адрес прокси-сервера динамический. Какие действия необходимо предпринять для исключения возможности подключения к проксируемому серверу в обход прокси-сервера?

Закрыть порты. Настроить Firewall на конечном сервера

### Практика

> Необходимо проходить по списку URL'ов и проверять их доступность. Условия:

```
#!/bin/bash

check_website_status() {
  start_time=$(date +%s)
  while true; do
    current_time=$(date +%s)
    elapsed_time=$((current_time - start_time))
    if [ "$elapsed_time" -ge "$timeout_seconds" ]; then
      echo "all site is aviable"
      break
    fi
    while IFS= read -r url; do
      response_code=$(curl -o /dev/null --silent --head --write-out '%{http_code}' "$url")
      if [[ $response_code -eq 000 ]]; then
        echo "Could not resolve host:" $url
      elif [[ $response_code -ge 400 ]]; then
        echo "site is unaviable: $url $response_code"
        exit 0
      fi
    done < "$urls_file"
  done
}
urls_file="./urls.txt"
timeout_seconds=12000
check_website_status "$urls_file"
```

> Есть условное Node.js приложение, и неправильно написанный Dockerfile, который не будет кэшироваться и будет занимать много места. Нужно переписать его в соответствии с best-practice:

```
FROM node:lts-alpine
WORKDIR /app
COPY ./package.json ./package-lock.json /
RUN npm install
COPY ./app/* /app/
ENTRYPOINT ["npm"]
CMD ["run", "prod"]
```

P.s Если бы пришлось писать что-то самому, на голом образе системы, то само собой почистил бы за собой лоточек после установки пакетов :)   
Alpine:

```
RUN apk add --no-cache *package* && \
*package*
```

Ubuntu:

```
RUN apt-get update && apt-get install -y *package* &&\
package && \
rm -rf /var/lib/apt/lists/*
```
